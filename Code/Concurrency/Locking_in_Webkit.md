Great discussion of custom lock implementation in WebKit that is optimized for tiny lock size and seldomly contended resources: https://webkit.org/blog/6161/locking-in-webkit/