Nice blog post by Figma on how their plugin system works:
https://www.figma.com/blog/how-we-built-the-figma-plugin-system/